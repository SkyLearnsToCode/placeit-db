<!doctype html>

<html>
<head>
	<title>WebReg Pro by Yellow Fellows</title>	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<link href="/css/bootstrap-theme.min.css" rel="stylesheet">
	<link href="/css/introHCI.css" rel="stylesheet">
	<!-- this is a comment in HTML -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->     
<script src="https://code.jquery.com/jquery.js"></script>
<script src="/js/bootstrap.min.js"></script>   
<script src="/js/knockout.js"></script>
<script src="/js/socket.io/dist/socket.io.js"></script>
<script src="/js/Models/IndexModel.js"></script>
<script src="/js/ViewModels/IndexViewModel.js"></script>
</head>
<style>
.classholder{
}
</style>
<script>
$(document).ready(function(){
  var ViewModel = new IndexViewModel(IndexModel, document.getElementById("container"));
  ViewModel.initialize();
});
</script>
<body class="container" id="container">
  <div class="page-header row ">
    <h1> 
    <img width="70" height="70" src="http://after5chronicles.files.wordpress.com/2013/02/ouroboros042.gif"/>
      Class Tracker <small> Now following...</small>
    </h1>
  </div>
  <div class="classholder">
    <div data-bind="if : viewedClasses().length == 0">
      <div class="alert alert-warning">You have no classes currently. Enroll now!</div>
    </div>

    <div data-bind="foreach: viewedClasses()">

      <div class="alert alert-success">
        <div class="row">

          <div class="col-md-2">
            <div data-bind="html : '<b>' + name + '</b>'"></div>
          </div>

          <div class="col-md-4">
            <div data-bind="html : '<small> Taught by ' + instructor + '</small>'"></div>
          </div>
          <div class="col-md-2">
            <div data-bind="html : '<small> Cluster :  ' + group + '</small>'"></div>
          </div>
          <div class="col-md-1">
            <div data-bind="html : '<b>' + enrollment() + '/' + max_enrollment + '</b>'"></div>
          </div>

          <div class="col-md-3">
            <button data-bind="click : $parent.getInfo" class="btn btn-info">Info</button>
            <button data-bind="click : $parent.unfollow" class="btn btn btn-primary">Unfollow</button>
            <button data-bind="click : $parent.enroll" class="btn btn-success">Enroll</button>
          </div>

        </div>

      </div>

    </div>

   <button class="btn btn-info"  data-toggle="modal" data-target="#myModal">Follow a class</button>
 </div>
</body>

<!-- MODAL -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body" data-bind="foreach : Object.keys(groupedClasses())">

        <div class="panel-group" id="accordion">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <a data-toggle="collapse" data-bind="text : $data, attr : {href : '#'+$data.slice(0,4)}" data-parent="#accordion" >
                </a>
               </h4>
            </div>
            <div data-bind="attr : {id : $data.slice(0,4)}" class="panel-collapse collapse">
              <div class="panel-body">
                <table class="table table-striped table-condensed">

                  <thead>
                    <tr>
                      <td>Class</td><td>Enrollment</td><td>Info</td><td>Follow</td>
                    </tr>
                  </thead>

                  <tbody data-bind="foreach : $parent.groupedClasses()[$data]">
                    <tr>
                      <td data-bind="text : name"></td>
                      <td data-bind="text : enrollment() + '/' + max_enrollment"></td>
                      <td>
                        <button class="btn btn-info"> INFO </button>
                        <button class="btn btn-success" 
                        data-bind="text : followed()? 'Unfollow' : 'Follow'" ></button>
                      </td>
                    </tr>
                  </tbody>

                </table>
              </div>
            </div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL -->




</html>
